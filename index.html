<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Nonsense Word Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: #0f172a;
      color: #e5e7eb;
    }

    body {
      margin: 0;
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      padding: 24px;
      box-sizing: border-box;
    }

    .app {
      width: 100%;
      max-width: 960px;
      background: rgba(15, 23, 42, 0.96);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.45);
      padding: 24px 24px 32px;
      box-sizing: border-box;
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    h1 {
      margin: 0 0 4px;
      font-size: 1.6rem;
      letter-spacing: 0.03em;
    }

    .subtitle {
      font-size: 0.9rem;
      color: #9ca3af;
      margin-bottom: 20px;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 18px;
    }

    @media (max-width: 768px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .panel {
      background: #020617;
      border-radius: 16px;
      padding: 14px 16px 18px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      box-sizing: border-box;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      margin-bottom: 10px;
    }

    .panel-title {
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: #9ca3af;
    }

    .panel-hint {
      font-size: 0.8rem;
      color: #6b7280;
      text-align: right;
    }

    .endings-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
      gap: 10px;
      margin-top: 6px;
    }

    .ending-card {
      background: radial-gradient(circle at top left, #1f2937, #020617);
      border-radius: 14px;
      padding: 10px 10px 12px;
      border: 1px solid rgba(75, 85, 99, 0.85);
      display: flex;
      flex-direction: column;
      gap: 6px;
      box-sizing: border-box;
    }

    .ending-label {
      font-size: 0.85rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }

    .ending-rime {
      font-size: 1.4rem;
      font-weight: 600;
    }

    .builder-row {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 4px;
    }

    .builder-row input {
      width: 2.4rem;
      padding: 4px 6px;
      font-size: 1rem;
      text-align: center;
      border-radius: 8px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      background: #020617;
      color: #f9fafb;
      outline: none;
    }

    .builder-row input:focus {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.5);
    }

    .full-word {
      flex: 1;
      min-height: 1.6em;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px dashed rgba(55, 65, 81, 0.9);
      font-size: 1rem;
      padding: 4px 10px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .full-word span {
      font-weight: 600;
      letter-spacing: 0.06em;
    }

    .full-word.real {
      border-style: solid;
      border-color: #22c55e;
      background: radial-gradient(circle at top, rgba(34, 197, 94, 0.18), rgba(15, 23, 42, 0.9));
    }

    /* Right panel */

    .big-builder {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-top: 4px;
    }

    .big-rime-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .current-rime {
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: radial-gradient(circle at top left, #111827, #020617);
      display: inline-flex;
      align-items: baseline;
      gap: 4px;
      font-size: 1.1rem;
    }

    .current-rime span:first-child {
      font-size: 0.8rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.15em;
    }

    .current-rime strong {
      font-size: 1.3rem;
    }

    button {
      font-family: inherit;
      cursor: pointer;
    }

    .button {
      padding: 7px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.65);
      background: #020617;
      color: #e5e7eb;
      font-size: 0.85rem;
      text-transform: uppercase;
      letter-spacing: 0.13em;
    }

    .button:hover {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.4);
    }

    .big-word-display {
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 12px 12px 14px;
      background: radial-gradient(circle at top, rgba(56, 189, 248, 0.08), rgba(15, 23, 42, 0.98));
      display: flex;
      flex-direction: column;
      gap: 6px;
    }

    .big-word-label {
      font-size: 0.8rem;
      color: #9ca3af;
      text-transform: uppercase;
      letter-spacing: 0.16em;
    }

    .big-word-text {
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: 0.18em;
      text-align: center;
      min-height: 2.2em;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .keyboard {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .key {
      min-width: 32px;
      padding: 5px 7px;
      border-radius: 999px;
      border: 1px solid rgba(75, 85, 99, 0.95);
      background: #020617;
      font-size: 0.9rem;
      text-align: center;
    }

    .key:hover {
      border-color: #38bdf8;
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.3);
    }

    .big-word-note {
      font-size: 0.85rem;
      color: #9ca3af;
    }

    .real-tag {
      display: inline-block;
      margin-left: 6px;
      font-size: 0.75rem;
      padding: 2px 7px;
      border-radius: 999px;
      border: 1px solid #22c55e;
      color: #bbf7d0;
      text-transform: uppercase;
      letter-spacing: 0.12em;
    }
  </style>
</head>
<body>
<div class="app">
  <h1>Nonsense Word Builder</h1>
  <p class="subtitle">
    Step 1: Look at the ending (like <strong>-ab</strong>).  
    Step 2: Add a starting letter to build a new 3-letter word.
  </p>

  <div class="layout">
    <!-- Left: grid of endings -->
    <section class="panel">
      <div class="panel-header">
        <div class="panel-title">Ending Cards</div>
        <div class="panel-hint">Type a first letter to build words</div>
      </div>
      <div id="endingsGrid" class="endings-grid">
        <!-- Cards inserted by JS -->
      </div>
    </section>

    <!-- Right: single big builder -->
    <section class="panel">
      <div class="panel-header">
        <div class="panel-title">Big Builder</div>
        <div class="panel-hint">Click letters to try different words</div>
      </div>

      <div class="big-builder">
        <div class="big-rime-row">
          <div class="current-rime">
            <span>Ending</span>
            <strong id="currentRime">-ab</strong>
          </div>
          <button class="button" id="randomRimeBtn" type="button">Random Ending</button>
        </div>

        <div class="big-word-display">
          <div class="big-word-label">
            Your word
            <span id="bigWordRealTag" class="real-tag" style="display:none;">Real word</span>
          </div>
          <div id="bigWord" class="big-word-text">_AB</div>
          <div class="keyboard" id="keyboard">
            <!-- Keys inserted by JS -->
          </div>
          <p class="big-word-note">
            Try different starting letters. Read the word out loud.  
            Green outline = known real word.
          </p>
        </div>
      </div>
    </section>
  </div>
</div>

<script>
  // Original nonsense words
  const nonsenseWords = [
    "bab","baf","baj","bak","bav","cag","caj","cak","cav","caz",
    "daj","dak","daf","daz","dav","faf","faj","fak","faz","fal",
    "gaj","gaf","gav","gax","gaz","hab","hak","hav","haz","hac",
    "jad","jaf"
  ];

  // Strip the first letter to get the rime (ending)
  const rimes = Array.from(new Set(nonsenseWords.map(w => w.slice(1)))).sort();

  // Tiny real-word list for a bit of feedback (not exhaustive)
  const realWords = new Set([
    "cab","dab","jab","lab","tab",
    "bag","tag","rag","wag",
    "dad","had","fad","bad","mad","sad",
    "hat","cat","bat","mat","sat",
    "gas","has"
  ]);

  const endingsGrid = document.getElementById("endingsGrid");
  const currentRimeEl = document.getElementById("currentRime");
  const bigWordEl = document.getElementById("bigWord");
  const bigWordRealTag = document.getElementById("bigWordRealTag");
  const randomRimeBtn = document.getElementById("randomRimeBtn");
  const keyboardEl = document.getElementById("keyboard");

  let currentRime = rimes[0];
  let currentFirstLetter = "";

  function makeEndingCard(rime) {
    const card = document.createElement("div");
    card.className = "ending-card";

    const label = document.createElement("div");
    label.className = "ending-label";
    label.textContent = "Ending";

    const rimeEl = document.createElement("div");
    rimeEl.className = "ending-rime";
    rimeEl.textContent = "-" + rime;

    const builderRow = document.createElement("div");
    builderRow.className = "builder-row";

    const input = document.createElement("input");
    input.type = "text";
    input.maxLength = 1;
    input.setAttribute("aria-label", "Starting letter for " + rime);

    const fullWord = document.createElement("div");
    fullWord.className = "full-word";
    const fullSpan = document.createElement("span");
    fullSpan.textContent = "_ " + rime;
    fullWord.appendChild(fullSpan);

    input.addEventListener("input", () => {
      let letter = input.value.toLowerCase().replace(/[^a-z]/g, "");
      input.value = letter;
      let word = (letter || "_") + rime;
      fullSpan.textContent = word.toUpperCase();

      fullWord.classList.remove("real");
      if (letter && realWords.has(letter + rime)) {
        fullWord.classList.add("real");
      }

      // If user clicks in this card, sync to big builder
      if (letter) {
        currentRime = rime;
        currentFirstLetter = letter;
        updateBigBuilder();
      }
    });

    builderRow.appendChild(input);
    builderRow.appendChild(fullWord);

    card.appendChild(label);
    card.appendChild(rimeEl);
    card.appendChild(builderRow);

    // Click rime itself to load into big builder
    card.addEventListener("click", (e) => {
      // avoid double-handling when typing
      if (e.target === input) return;
      currentRime = rime;
      currentFirstLetter = input.value.toLowerCase();
      updateBigBuilder();
    });

    return card;
  }

  function renderEndings() {
    rimes.forEach(r => {
      endingsGrid.appendChild(makeEndingCard(r));
    });
  }

  function updateBigBuilder() {
    currentRimeEl.textContent = "-" + currentRime;
    const first = currentFirstLetter || "_";
    const word = first + currentRime;
    bigWordEl.textContent = word.toUpperCase();
    if (currentFirstLetter && realWords.has(currentFirstLetter + currentRime)) {
      bigWordRealTag.style.display = "inline-block";
    } else {
      bigWordRealTag.style.display = "none";
    }
  }

  function pickRandomRime() {
    const idx = Math.floor(Math.random() * rimes.length);
    currentRime = rimes[idx];
    currentFirstLetter = "";
    updateBigBuilder();
  }

  function buildKeyboard() {
    const letters = "bcdfghjklmnpqrstvwxz".split("");
    letters.forEach(letter => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "key";
      btn.textContent = letter;
      btn.addEventListener("click", () => {
        currentFirstLetter = letter;
        updateBigBuilder();
      });
      keyboardEl.appendChild(btn);
    });
  }

  randomRimeBtn.addEventListener("click", pickRandomRime);

  // Init
  renderEndings();
  buildKeyboard();
  updateBigBuilder();
</script>
</body>
</html>

